<span>
    <ng-template #tolTemplateStatusRep>
      <p class="tooltipStyle">{{dss}}</p>
      <p class="tolPurpose"> {{ dssDetail.dssPurpose }}</p>
      <p [ngClass]="{'tolInactive': status==0, 'tolLowRisk': status==2, 'tolMediumRisk':status==3, 'tolHighRisk': status==4}">
        {{ status==0? ('DSS_use_dashboard.Grey_box' | translate) : null }}
        {{ status==2? ('DSS_use_dashboard.Low_risk' | translate) : null }}
        {{ status==3? ('DSS_use_dashboard.Medium_risk' | translate) : null }}
        {{ status==4? ('DSS_use_dashboard.High_risk' | translate) : null }}
      </p>
    </ng-template>
    <span id="myDssBadgeId" class="badge dss-badge containerBox"
        [tooltip]="tolTemplateStatusRep"
        delay="1000"
        [ngClass]="{'badge-secondary':!status, 'badge-info': status==1, 'badge-success': status==2, 'badge-warning':status==3, 'badge-danger': status==4}"
        *ngIf="!(executionType==='link') && !isLegend && !isDisabled">
        <span *ngIf="dssDescription" class="infoIcon fa-stack">
          <a class="details" (click)="openModal(infoModal,'modal-lg')">
            <i class="fas fa-circle fa-stack-1x"></i>
            <i class="fas fa-info-circle fa-stack-1x"></i>
          </a>
        </span>
        <div *ngIf="status==4" class="HighRiskIcon">
          <div class="row">
            <i class="fas fa-caret-up"></i>
          </div>
          <div class="row HRSecondIconSymbolDistance">
            <i class="fas fa-caret-up"></i>
          </div>
          <div class="row HRThirdIconSymbolDistance">
            <i class="fas fa-caret-up"></i>
          </div>
        </div>
        <div *ngIf="status==3" class="MediumRiskIcon">
          <div class="row">
            <i class="fas fa-circle"></i>
          </div>
          <div class="row MRSecondIconSymbolDistance">
            <i class="fas fa-circle"></i>
          </div>
          <div class="row MRThirdIconSymbolDistance">
            <i class="fas fa-circle"></i>
          </div>
        </div>
        <div *ngIf="status==2" class="LowRiskIcon">
          <div class="row">
            <i class="fas fa-caret-down"></i>
          </div>
          <div class="row LRSecondIconSymbolDistance">
            <i class="fas fa-caret-down"></i>
          </div>
          <div class="row LRThirdIconSymbolDistance">
            <i class="fas fa-caret-down"></i>
          </div>
        </div>
        <span *ngIf="gotErrorType()" class="fa-stack" 
          [ngClass]="{'errorIcon-green': errorType==0, 'errorIcon-yellow': errorType==1, 'errorIcon-red': errorType==2}">
            <a class="details" (click)="openModal(errorModal,'modal-lg')" [title]="('Common_labels.Click_to_open' | translate)">
                <i class="fa fa-square fa-stack-2x"></i>
                <i *ngIf="errorType==2" class="fa fa-exclamation-triangle fa-stack-2x"></i>
                <i *ngIf="errorType==1" class="fa fa-exclamation fa-stack-2x"></i>
                <i *ngIf="errorType==0" class="fa fa-exclamation-circle fa-stack-2x"></i>
            </a>
        </span>
        <span *ngIf="isQueued && !isScheduled" class="syncIcon">
          <i class="fas fa-sync fa-spin"></i>
        </span>
        <span *ngIf="!isQueued && isScheduled" class="scheduledIcon fa-stack">
          <a class="details" (click)="openModal(scheduledModal,'modal-sm')">
            <i class="fas fa-circle fa-stack-1x"></i>
            <i class="fas fa-clock fa-stack-1x"></i>
          </a>
        </span>
        <a *ngIf="itemId && isValid; else notValidDSS" [routerLink]="[itemId,'view']" [ngClass]="{'textColorNormal': status!=1, 'textColorBlack':status==1}">
            <h6  *ngIf="!isLegend" class="TextBoxMargin"><b>{{code | eppoCode }}</b></h6>
            <!--<small  *ngIf="!isLegend">({{ code }})</small>-->
        </a>
        <ng-template #notValidDSS>
          <a (click)="goToModelParameterisation()" [ngClass]="{'textColorNormal': status!=1, 'textColorBlack':status==1}">
            <h6  *ngIf="!isLegend" class="TextBoxMargin"><b>{{code | eppoCode }}</b></h6>
            <!--<small  *ngIf="!isLegend">({{ code }})</small>-->
          </a>
        </ng-template>
    </span>

    <!-- Template for Legend Badge -->
    <span class="badge dss-badge-legend containerBox"
        [ngClass]="{'badge-secondary':!status, 'badge-info': status==1, 'badge-success': status==2, 'badge-warning':status==3, 'badge-danger': status==4}"
        *ngIf="isLegend">
        <div *ngIf="status==4" class="HighRiskIcon">
          <div class="row">
            <i class="fas fa-caret-up"></i>
          </div>
          <div class="row HRSecondIconSymbolDistance">
            <i class="fas fa-caret-up"></i>
          </div>
          <div class="row HRThirdIconSymbolDistance">
            <i class="fas fa-caret-up"></i>
          </div>
        </div>
        <div *ngIf="status==3" class="MediumRiskIcon">
          <div class="row">
            <i class="fas fa-circle"></i>
          </div>
          <div class="row MRSecondIconSymbolDistance">
            <i class="fas fa-circle"></i>
          </div>
          <div class="row MRThirdIconSymbolDistance">
            <i class="fas fa-circle"></i>
          </div>
        </div>
        <div *ngIf="status==2" class="LowRiskIcon">
          <div class="row">
            <i class="fas fa-caret-down"></i>
          </div>
          <div class="row LRSecondIconSymbolDistance">
            <i class="fas fa-caret-down"></i>
          </div>
          <div class="row LRThirdIconSymbolDistance">
            <i class="fas fa-caret-down"></i>
          </div>
        </div>
    </span>

    <!-- Template for External DSS Badge -->
    <div class="card exeLink" *ngIf="executionType ==='link'" [ngClass]="{'selectedExeLink': selectedDss === true}">
      <div class="card-body">
        <div class="col linkedBadgeText">
          <a [href]="endpoint" target="_blank" style="color: #6c757d">
            <h6><b>{{dss}}</b></h6>
            <!--<small>({{ code }})</small>-->
          </a>
        </div>
        <span *ngIf="dssDescription" class="infoIcon fa-stack">
          <a class="details" (click)="openModal(infoModal,'modal-lg')">
            <i class="fas fa-circle fa-stack-1x"></i>
            <i class="fas fa-info-circle fa-stack-1x"></i>
          </a>
        </span>
      </div>
      <div class="card-footer">
        <div class="badgecontrols align-self-center" *ngIf="!isUserSelected && !isEditing">
          <button class="btn btn-font" (click)="SelectExternalDss()" [ngClass]="{'data-notSelected': selectedDss === true}">
              <i class="action-icon fas light-green-icon fa-plus-circle"> <span class="label-font">{{'Common_labels.Select' | translate}}</span> 
              </i>
          </button>
          <button class="btn btn-font" (click)="DeselectExternalDss()" [ngClass]="{'data-notSelected': selectedDss === false}">
              <i class="action-icon fas fa-minus-circle" style="color: rgb(179, 0, 0);"> 
                <span class="label-font">{{'Common_labels.Deselect' | translate}}</span>
              </i>
          </button> 
        </div>
        <div class="badgecontrols align-self-center" *ngIf="isUserSelected && isEditing">

          <ng-template #deleteTemplate>
              <div class="modal-header">
                <h4 class="modal-title">
                  <i class="fas fa-exclamation-triangle mr-2"></i>{{ 'DSS_linked.Remove_linked_dss' | translate }}
              </h4>
                <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                {{ 'Information_messages.You_are_about_to_remove' | translate }} 
                <div class="text-muted dss-text"><b>{{dssDetail.dssModelName}}</b></div> 
                <br>{{ 'Information_messages.Are_you_sure' | translate }}
              </div>
              <div class="modal-footer pull-right">
                <button type="button" class="btn btn-default" (click)="modalRef.hide()">{{'Common_labels.Cancel' | translate}}</button>
                <button type="button" class="btn btn-primary" (click)="DeleteExternalDss()">{{'Common_labels.Yes' | translate}}</button>
              </div>
            </ng-template>
    
          <button class="btn btn-font" (click)="openModal(deleteTemplate, null)">
              <i class="action-icon fas fa-trash">
              </i> <span id="trash-can" class="label-font"> {{'Common_labels.Delete' | translate}} </span> 
          </button>
        </div>
        <div class="align-self-center linkedBadgeIcon">
          <span class="fas fa-link external-link-icon" style="color: #50a50b"></span> 
        </div>
      </div>   
    </div>

    <!-- Template for Disabled DSS Badge -->
    <span id="myDssBadgeId" class="badge dss-badge containerBox"
        [tooltip]="tolTemplateStatusRep"
        delay="1000"
        [ngClass]="'badge-secondary'"
        *ngIf="isDisabled">
        <span *ngIf="dssDescription" class="infoIcon fa-stack">
          <a class="details" (click)="openModal(infoModal,'modal-lg')">
            <i class="fas fa-circle fa-stack-1x"></i>
            <i class="fas fa-info-circle fa-stack-1x"></i>
          </a>
        </span>
        <span class="fa-stack" 
          [ngClass]="'disable-icon'">
            <a class="details" (click)="openModal(disabledModal,'modal-lg')" [title]="('Common_labels.Click_to_open' | translate)">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-ban fa-stack-2x"></i>
            </a>
        </span>
            <h6  *ngIf="!isLegend" class="TextBoxMargin textColorNormal"><b>{{code | eppoCode }}</b></h6>
        <ng-template #notValidDSS>
            <h6  *ngIf="!isLegend" class="TextBoxMargin textColorNormal"><b>{{code | eppoCode }}</b></h6>
        </ng-template>
    </span>

    <!--<span *ngIf="dss && !isLegend" class="dss text-truncate" placement="bottom">{{dss}}</span>-->
    <span *ngIf="isLegend" class="dss-badge-legend" placement="bottom"><b>{{dss}}</b></span>
</span>

<!-- ERROR MODAL -->
<ng-template #errorModal>
    <div class="modal-header">
      <h4 class="modal-title pull-left">
        <span class="fa-stack" 
          [ngClass]="{'modalErrorIcon-green': errorType==0, 'modalErrorIcon-yellow': errorType==1, 'modalErrorIcon-red': errorType==2}">
                <i class="fas fa-square fa-stack-1x"></i>
                <i *ngIf="errorType==2" class="fa fa-exclamation-triangle fa-stack-2x"></i>
                <i *ngIf="errorType==1" class="fa fa-exclamation fa-stack-2x"></i>
                <i *ngIf="errorType==0" class="fa fa-exclamation-circle fa-stack-2x"></i>
        </span> 
        <b *ngIf="errorType==0">{{ 'Common_labels.Info' | translate }}</b>
        <b *ngIf="errorType==1">{{ 'Common_labels.Warning' | translate }}</b>
        <b *ngIf="errorType==2">{{ 'Common_labels.Error' | translate }}</b>
      </h4>
      <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body scrollable m-2">
      <div class="form-group row">
        <div class="col-md justify-content-center">
            <div class="alert text-muted"
              [ngClass]="{'alert-green': errorType==0, 'alert-warning': errorType==1, 'alert-danger': errorType==2}">
                <strong>
                  {{ 'Error_messages.DSS_use_dashboard_error_standard_info' | translate }}
                <br>
                <br>
                <span [innerText]="errorMessage"></span>
                </strong>
            </div>
        </div>
      </div>
    </div>
    <div class="modal-footer pull-right">
      <button type="button" class="btn btn-info push-right" (click)="modalRef.hide()">{{ 'Common_labels.Close' | translate }}</button>
    </div>
</ng-template>

<!-- INFO MODAL -->
<ng-template #infoModal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">
      <span class="modalInfoIcon fa-stack">
        <i class="fas fa-circle fa-stack-1x"></i>
        <i class="fas fa-info-circle fa-stack-1x"></i>
      </span> <b>{{ 'DSS_info_popup.Dss_informations' | translate }}</b>
    </h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body scrollable m-2">
    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.DSS_name' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.dssModelName }}</p>
      </div>
    </div>
    
    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.DSS_purpose' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.dssPurpose }}</p>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.DSS_model_id' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.dssModelId }}</p>
      </div>
    </div>

    <!--<div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.Warning_status_representation' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.warningStatusRepresentation }}</p>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.Warning_message' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.warningExplanation }}</p>
      </div>
    </div>-->

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.Description' | translate }}</strong></label>
      <div class="col-sm-9 newline-rendering" [innerHTML]="dssDetail.dssDescription | htmlLink">
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><b>{{ 'DSS_info_popup.Authors_name' | translate }}</b></label>
      <div class="col-sm-9" *ngFor="let author of dssDetail.authors">
          <p>{{ author.name }} ({{ author.organization }})</p>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.Source' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.dssName }}</p>
      </div>
    </div>

    <div class="form-group row">
      <label class="col-sm-3 col-form-label"><strong>{{ 'DSS_info_popup.Source_organisation' | translate }}</strong></label>
      <div class="col-sm-9">
        <p>{{ dssDetail.dssSource }}</p>
      </div>
    </div>
  </div>
  <div class="modal-footer pull-right">
    <button type="button" class="btn btn-info push-right" (click)="modalRef.hide()">{{ 'Common_labels.Close' | translate }}</button>
  </div>
</ng-template>

<!-- SCHEDULED MODAL -->
<ng-template #scheduledModal>
  <div class="modal-header">
    <h5 class="modal-title pull-left">
      <span class="modalScheduledIcon fa-stack">
        <i class="fas fa-circle fa-stack-1x"></i>
        <i class="fas fa-clock fa-stack-1x"></i>
      </span> <b>{{ 'DSS_use_dashboard.Scheduled_time' | translate }}</b>
    </h5>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body scrollable m-2">
    <div class="form-group row">
        <div class="col-sm-9">
            <p>{{ scheduleTime }}</p>
        </div>
    </div>
  </div>
  <div class="modal-footer pull-right">
    <button type="button" class="btn btn-info push-right" (click)="modalRef.hide()">{{ 'Common_labels.Close' | translate }}</button>
  </div>
</ng-template>

<!-- DISABLED MODAL -->
<ng-template #disabledModal>
  <div class="modal-header">
    <h4 class="modal-title pull-left">
      <span class="fa-stack" 
        [ngClass]="'modal-disable-icon'">
              <i class="fas fa-circle fa-stack-1x"></i>
              <i class="fa fa-ban fa-stack-2x"></i>
      </span> 
      <b>{{ 'Common_labels.Disabled' | translate }}</b>
    </h4>
    <button type="button" class="close pull-right" aria-label="Close" (click)="modalRef.hide()">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body scrollable m-2">
    <div class="form-group row">
      <div class="col-md justify-content-center">
          <div class="alert text-muted"
            [ngClass]="'alert-warning'">
              <strong>
                {{ 'Error_messages.DSS_disabled_info_message' | translate }}
              <br>
              <br>
              </strong>
          </div>
      </div>
    </div>
  </div>
  <div class="modal-footer pull-right">
    <button type="button" class="btn btn-info push-right" (click)="modalRef.hide()">{{ 'Common_labels.Close' | translate }}</button>
  </div>
</ng-template>