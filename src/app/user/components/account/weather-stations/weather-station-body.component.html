<legend class="w-auto px-1 text-muted h5">
    <b>{{ weatherStation.weatherName }}</b>
</legend>
<fieldset class="border p-3 ml-3 mr-3 mb-3">
    <legend class="w-auto px-1 text-muted h5">
      <b>{{ 'User_weather_stations.Non_associated_Farms' | translate }}</b>
    </legend>
    <div class="row" *ngIf="!noFarmsAvailable; else noFarms">
      <div class="col">
        <table class="table table-striped table-responsive-sm table-bordered">
          <thead>
            <tr>
                <th class="text-center" scope="col">{{ 'Farm_list.Name' | translate }}</th>
                <th class="text-center" scope="col">{{ 'Farm_list.Farm_location' | translate }}</th>
                <th class="text-center" scope="col">{{ 'Farm_list.Actions' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let farm of nonAssociatedFarms; index as i">
                <tr>
                    <td class="text-center">
                        {{ farm.name }}
                    </td>
                    <td class="text-center hover-pointer">
                        <span placement="top" tooltip={{farm.location?.address?.LongLabel}}>
                            {{farm.location?.address?.LongLabel}}
                        </span>
                    </td>
                    <td class="text-center">
                        <button *ngIf="!isTheFarmSelectedForAssociation[i]" type="button" class="btn btn-primary" (click)="selectFarm(farm.id, 'Association', i)">
                          {{ 'Common_labels.Select' | translate }}
                        </button>
                        <button *ngIf="isTheFarmSelectedForAssociation[i]" type="button" class="btn btn-danger" (click)="deselectFarm(farm.id, 'Association', i)">
                          {{ 'Common_labels.Deselect' | translate }}
                       </button>
                    </td>
                </tr>
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row" *ngIf="!noFarmsAvailable">
      <div class="col">
        <button [disabled]="selectedFarmsForAssociation.length == 0" type="button" class="btn btn-primary pull-right" (click)="associateFarmsToWeatherStation()">{{ 'User_weather_stations.Associate' | translate }}</button>
      </div>
    </div>
</fieldset>

<fieldset class="border p-3 ml-3 mr-3 mb-3">
    <legend class="w-auto px-1 text-muted h5">
      <b>{{ 'User_weather_stations.Associated_Farms' | translate }}</b>
    </legend>
    <div class="row" *ngIf="!noAssociatedFarms; else noAssociation">
      <div class="col">
        <table class="table table-striped table-responsive-sm table-bordered">
          <thead>
            <tr>
                <th class="text-center" scope="col">{{ 'Farm_list.Name' | translate }}</th>
                <th class="text-center" scope="col">{{ 'Farm_list.Farm_location' | translate }}</th>
                <th class="text-center" scope="col">{{ 'Farm_list.Actions' | translate }}</th>
            </tr>
          </thead>
          <tbody>
            <ng-container *ngFor="let farm of associatedFarms; index as i">
              <tr>
                <td class="text-center">
                    {{ farm.name }}
                </td>
                <td class="text-center hover-pointer">
                    <span placement="top" tooltip={{farm.location?.address?.LongLabel}}>
                        {{farm.location?.address?.LongLabel}}
                    </span>
                </td>
                <td class="text-center">
                    <button *ngIf="!isTheFarmSelectedForDisassociation[i]" type="button" class="btn btn-primary" (click)="selectFarm(farm.id, 'Disassociation', i)">
                      {{ 'Common_labels.Select' | translate }}
                    </button>
                    <button *ngIf="isTheFarmSelectedForDisassociation[i]" type="button" class="btn btn-danger" (click)="deselectFarm(farm.id, 'Disassociation', i)">
                      {{ 'Common_labels.Deselect' | translate }}
                   </button>
                </td>
            </tr>              
            </ng-container>
          </tbody>
        </table>
      </div>
    </div>
    <div class="row" *ngIf="!noAssociatedFarms">
      <div class="col">
        <button [disabled]="selectedFarmsForDisassociation.length == 0" type="button" class="btn btn-danger pull-right" (click)="disassociateFarmsFromWeatherStation()">{{ 'User_weather_stations.Disassociate' | translate }}</button>
      </div>
    </div>
</fieldset>
<button class="btn btn-info pull-right" (click)="closeInfo()">{{ 'Common_labels.Close' | translate }}</button>


<ng-template #noFarms>
  <div class="card">
    <div class="d-flex justify-content-center p-3 text-muted">
      <strong>
        {{ 'Information_messages.No_farms_available' | translate }}
      </strong>
    </div>
  </div>
</ng-template>

<ng-template #noAssociation>
  <div class="card">
    <div class="d-flex justify-content-center p-3 text-muted">
      <strong>
        {{ 'Information_messages.No_associated_farm' | translate }}
      </strong>
    </div>
  </div>
</ng-template>
