<div class="modal-header">
  <h4 class="modal-title pull-left" *ngIf="!field">Add crop/pest combination</h4>
  <h4 class="modal-title pull-left" *ngIf="field">Edit crop/pest combination</h4>
  <button type="button" class="close pull-right" aria-label="Close" (click)="close()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">

  <div class="container">
    <div class="row mb-1">
      <strong class="text-uppercase bold-600">Farm:</strong>
      <span class="ml-2">{{ farm.name }}</span>
    </div>
    <fieldset class="border p-2">
      <form [formGroup]="fieldForm">
        <div class="row">
          <div class="col-12">
            <fieldset class="border p-3">
              <legend class="w-auto px-1 text-muted">Select crop and pest</legend>

              <!-- add crop pest combination on button clicked -->
              <div formGroupName="cropPest">
                <div class="form-group row">
                  <label for="field" class="col-sm-4 col-md-2 col-form-label">Crop</label>
                  <div class="col-sm-8 col-md-10">
                    <select class="form-control" id="crop" formControlName="cropEppoCode">
                      <ng-template ngFor let-crop [ngForOf]="crops">
                        <option value="{{crop.value}}">{{crop.label}} - {{crop.label | eppoCode}}</option>
                      </ng-template>
                    </select>
                  </div>
                </div>
                <div class="form-group row">
                  <label for="variety" class="col-sm-4 col-md-2 col-form-label">Pest</label>
                  <div class="col-sm-8 col-md-10">
                    <select class="form-control" id="pest" formControlName="pestEppoCode">
                      <ng-template ngFor let-pest [ngForOf]="pests">
                        <option value="{{pest.value}}">{{pest.label}} | {{pest.label | eppoCode}} </option>
                      </ng-template>
                    </select>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="col-12 mt-4">
            <fieldset class="border p-3">
              <legend class="w-auto px-1 text-muted">Select variety and sowing date</legend>

              <div class="form-group row">
                <label for="variety" class="col-sm-4 col-md-2 col-form-label">Variety</label>
                <div class="col-sm-8 col-md-10">
                  <input type="text" class="form-control" id="variety" formControlName="variety" placeholder="Type a variety">
                </div>
              </div>
              <div class="form-group row">
                <label for="sowing-date" class="col-sm-4 pr-0 col-form-label">Sowing
                  date</label>
                <div class="col-sm-8 input-group">
                  <input type="text" class="form-control" id="sowing-date" formControlName="sowingDate" bsDatepicker autocomplete="off"
                    placeholder="dd/mm/yyyy" [bsConfig]="{ dateInputFormat: 'DD/MM/YYYY'}" placement="top">
                  <div class=" input-group-append">
                    <label for="sowing-date" class="input-group-text">
                      <i class="far fa-calendar-alt fa-lg"></i>
                    </label>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>
        </div>
      </form>
    </fieldset>
  </div>
</div>
<div class="modal-footer">
  <button class="btn btn-info col-2 mr-2" (click)="close()">
    Back</button>
  <button *ngIf="!field" class="btn btn-info col-2" (click)="onCreateField()">
    Save</button>
  <button *ngIf="field" class="btn btn-info col-2" (click)="onEditFieldSubmit()">
    Update</button>
</div>